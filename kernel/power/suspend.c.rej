@@ -30,6 +30,10 @@
 #include <trace/events/power.h>
 #include <linux/compiler.h>
 #include <linux/moduleparam.h>
+#ifdef CONFIG_PLAT_BBOX
+#include <linux/soc/cix/cix_suspend.h>
+#include <linux/soc/cix/rdr_platform.h>
+#endif
 
 #include "power.h"
 
@@ -507,6 +511,12 @@
 	error = dpm_suspend_start(PMSG_SUSPEND);
 	if (error) {
 		pr_err("Some devices failed to suspend, or early wake event detected\n");
+#ifdef CONFIG_PLAT_BBOX
+		if (suspend_warning_check() == false)
+			rdr_system_error(MODID_AP_SUSPEND_DEVICE_FAIL, 0, 0);
+		else
+			suspend_warning_clear();
+#endif
 		goto Recover_platform;
 	}
 	suspend_test_finish("suspend devices");
